{% extends "base.html" %}
{% block title %}The TikTok of Tricks !{% endblock %}
{% block content %}
<div id="all">
    <div id="home">
        <div class="container">
            <div class="overlay">
                <div class="howto">
                    <div class="explain">
                        <ul class="explain-list">
                            <li class="explain-details">
                                <h2 class="explain-details-head" style="color: #FFE66D;" >Likes</h2>
                                <span class="explain-details-desc">Cliquez <span class="icon">
                  <img src="https://assets.codepen.io/2629920/heart.png" alt="">
                </span> pour mettre un like.</span>
                            </li>
                            <li class="explain-details">
                                <h2 class="explain-details-head">Commentaires</h2>
                                <span class="explain-details-desc">Cliquez <span class="icon">
                  <img src="https://assets.codepen.io/2629920/chat.png" alt="">
                </span> pour voir les commentaires.</span>
                            </li>
                            <li class="explain-details">
                                <h2 class="explain-details-head" style="color: #FFE66D;">Swipe</h2>
                                <span class="explain-details-desc">Swiper vers le haut <span class="icon">
                                    <i class="fas fa-arrow-up"></i>
                </span> pour aller à la prochaine vidéo.<br></span>
                                <span class="explain-details-desc">Swiper vers le bas <span class="icon">
                                    <i class="fas fa-arrow-down"></i>
                </span> pour revenir à la vidéo précédente.</span>
                            </li>
                            <li class="explain-details">
                                <h2 class="explain-details-head">Conditions</h2>
                                <span class="explain-details-desc">Cliquez sur j'ai compris pour accepter nos <a>conditions</a> et continuer.</span>
                            </li>
                        </ul>
                        <div class="explain-video">
                            <h2 class="explain-details-head explain-video">Vidéo</h2>
                            <div class="explain-video-bar">
                                <div class="explain-video-bar-w"></div>
                            </div>
                            <span class="explain-details-desc">Cliquez sur la timeline pour naviguer dans la vidéo.</span>
                        </div>
                    </div>
                    <button class="howto-close">J'ai compris !</button>
                </div>
            </div>
            <div class="comments-container">
                <div class="comments-head">
                    <span class="comments-head-label"></span>
                    <span style="transform: scale(1.35)" class="comments-head-close">
          &#10005;
        </span>

                </div>
                <div class="comments-list">
                </div>
            </div>
            <video style="cursor: ns-resize;" title="Swipe" muted="muted" number="0" src="{{videos['srcs'][0]}}" id="{{videos['ids'][0]}}" class="video" playsinline autoplay loop></video>

            <!--  top labels   -->
            <div class="top">
                <span class="label label-main"><img height="50" alt="trickstok logo" src="/static/assets/trickstok_logo_trans.png"></span>
                <span class="label label-active">Abonnements</span>
            </div>

            <!-- right labels  -->
            <div class="right">
                <div class="icons-item right-icon">
        <span class="icon" onclick="audio(this.children[0])" style="cursor: pointer">
          <i  class="fas fa-volume-mute"></i>
        </span>
                    <span id="muteun" class="icon-label likes right-label">Muet</span>
                </div>
                <div class="icons-item right-icon">
        <span class="icon">
          <i  id="likes-icon" class="fas fa-heart"></i>
        </span>
                    <span class="icon-label likes right-label" data-likes='999'>999</span>
                </div>
                <div class="icons-item right-icon">
        <span class="icon">
          <i id="comments-icon" class="fas fa-comments"></i>
        </span>
                    <span class="icon-label comments right-label"></span>
                </div>
                <div class="icons-item right-icon" onclick="share()" style="cursor: pointer;">
        <span class="icon">
          <i class="fas fa-share"></i>
        </span>
                    <span class="icon-label shares right-label">Partager</span>
                </div>

            </div>

            <!--  bottom labels  -->
            <div class="bottom">
                <span class="progress-duration"></span>
                <div class="progress-range" title="seek">
                    <div class="progress-bar"></div>
                </div>
                <div class="icons">
                    <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/home.png" alt="">
          </span>
                        <span class="icon-label" onclick="changePage('home')" style="color: #FF6B6B" >Accueil</span>
                    </div>
                    <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/search_1.png" alt="">
          </span>
                        <span class="icon-label" onclick="changePage('search')" >Rechercher</span>
                    </div>
                    <div class="icons-item">
                        <div class="icons-item-add">
            <span class="icon" style="display: flex;">
              <img src=" https://assets.codepen.io/2629920/add.png" alt="">
            </span>
                        </div>
                    </div>
                    <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/comment.png" alt="">
          </span>
                        <span class="icon-label">Messages</span>
                    </div>
                    <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/user+%281%29.png" alt="">
          </span>
                        <span class="icon-label" onclick="changePage('account')" >Compte</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="search" style="display: none">
        <div class="container"></div>
        <div class="bottom">
            <span class="progress-duration"></span>
            <div class="progress-range" title="seek">
                <div class="progress-bar"></div>
            </div>
            <div class="icons">
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/home.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('home')" >Accueil</span>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/search_1.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('search')" style="color: #FF6B6B" >Rechercher</span>
                </div>
                <div class="icons-item">
                    <div class="icons-item-add">
            <span class="icon" style="display: flex;">
              <img src=" https://assets.codepen.io/2629920/add.png" alt="">
            </span>
                    </div>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/comment.png" alt="">
          </span>
                    <span class="icon-label">Messages</span>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/user+%281%29.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('account')" >Compte</span>
                </div>
            </div>
        </div>
    </div>
    <div id="account" style="display: none">
        <div class="container profil">
            <div class="profile">
                <div class="image">
                    <img src="/static/assets/trickstok_logo.png" alt="Profil Picture">
                </div>
                <div class="infos">
                    <h1>Tricky Tricks Official <i class="fas fa-certificate"></i></h1>
                    <p>Le compte officiel de Tricky Tricks</p>
                </div>
            </div>
            <div class="videos">
                <div class="video-card">
                    <div class="video-header">
                        <h1>Clean kickflip !</h1>
                        <h5><img alt="Profil Picture" src="/static/assets/trickstok_logo.png"> Tricky Tricks Official</h5>
                    </div>
                    <div class="video-media">
                        <video src="/static/assets/Clean%20kickflip.mp4"></video>
                    </div>
                </div>
                <div class="video-card">
                    <div class="video-header">
                        <h1>Wheep !</h1>
                        <h5><img alt="Profil Picture" src="/static/assets/trickstok_logo.png"> Tricky Tricks Official</h5>
                    </div>
                    <div class="video-media">
                        <video src="/static/assets/scooter.mp4"></video>
                    </div>
                </div>
                <div class="video-card">
                    <div class="video-header">
                        <h1>Triple kaboom</h1>
                        <h5><img alt="Profil Picture" src="/static/assets/trickstok_logo.png"> Tricky Tricks Official</h5>
                    </div>
                    <div class="video-media">
                        <video src="/static/assets/tramp.mp4"></video>
                    </div>
                </div>
                <div class="video-card">
                    <div class="video-header">
                        <h1>Surf clip</h1>
                        <h5><img alt="Profil Picture" src="/static/assets/trickstok_logo.png"> Tricky Tricks Official</h5>
                    </div>
                    <div class="video-media">
                        <video src="/static/assets/surf-kickflip.mp4"></video>
                    </div>
                </div>
                <div class="video-card">
                    <div class="video-header">
                        <h1>Longboard skills</h1>
                        <h5><img alt="Profil Picture" src="/static/assets/trickstok_logo.png"> Tricky Tricks Official</h5>
                    </div>
                    <div class="video-media">
                        <video src="/static/assets/longboard.mp4"></video>
                    </div>
                </div>
                <div style="height: 14em"></div>
            </div>
            <div class="profil-footer" style="padding-top: 5em;">
                <h3>Profil de Tricky Tricks Official <i class="fas fa-certificate"></i></h3>
                <p>(Authenticité certifiée)</p>
            </div>
        </div>
        <div class="bottom">
            <span class="progress-duration"></span>
            <div class="progress-range" title="seek">
                <div class="progress-bar"></div>
            </div>
            <div class="icons">
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/home.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('home')" >Accueil</span>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/search_1.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('search')" >Rechercher</span>
                </div>
                <div class="icons-item">
                    <div class="icons-item-add">
            <span class="icon" style="display: flex;">
              <img src=" https://assets.codepen.io/2629920/add.png" alt="">
            </span>
                    </div>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/comment.png" alt="">
          </span>
                    <span class="icon-label">Messages</span>
                </div>
                <div class="icons-item">
          <span class="icon">
            <img src="https://assets.codepen.io/2629920/user+%281%29.png" alt="">
          </span>
                    <span class="icon-label" onclick="changePage('account')" style="color: #FFE66D" >Compte</span>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    let ids = ['search', 'home', 'account']
    let number, link;
    const videos = {{videos['srcs']|safe}};
    const comments_ids = {{videos['ids']|safe}};
    const videos_length = videos.length;
    function changePage(id) {
        for (const id1 of ids) {
            document.getElementById(id1).setAttribute('style', 'display: none');
        }
        document.getElementById(id).setAttribute('style', '')
    }
    function animdown(src, id) {
        video.setAttribute('class', 'video up')
        setTimeout(() => {
            video.src = src
            video.id = id
            loadComments(video.getAttribute('id'))
        }, 450)
        setTimeout(() => {
            video.setAttribute('class', 'video')
        }, 900)
    }
    function animup(src, id) {
        video.setAttribute('class', 'video down')
        setTimeout(() => {
            video.src = src
            video.id = id
            loadComments(video.getAttribute('id'))
        }, 450)
        setTimeout(() => {
            video.setAttribute('class', 'video')
        }, 900)
    }
    function swipedown(video=document.querySelector('.video')) {
        number = parseInt(video.getAttribute('number')) + 1
        if (videos[number] === undefined) {
            number = 0
        }
        animdown(videos[number], comments_ids[number])
        video.setAttribute('number', number)
    }
    function swipeup(video=document.querySelector('.video')) {
        number = parseInt(video.getAttribute('number')) - 1
        if (videos[number] === undefined) {
            number = videos_length - 1
        }
        animup(videos[number], comments_ids[number])
        video.setAttribute('number', number)
    }
    const swiper = new Swipe(document.querySelector('.video'))
    swiper.onDown(swipeup)
    swiper.onUp(swipedown)
    swiper.run()
    function audio(obj) {
        if (video.muted) {
            video.muted = false;
            obj.setAttribute('class', 'fas fa-volume-up')
            document.getElementById('muteun').innerHTML = '&nbsp;Son&nbsp;'
        } else {
            video.muted = true;
            obj.setAttribute('class', 'fas fa-volume-mute')
            document.getElementById('muteun').innerHTML = 'Muet'
        }
    }
    function share() {
        link = window.location.method + window.location.host + `/video/${comments_ids[parseInt(video.getAttribute('number'))]}`
        navigator.share({
            title: `Tricky Tricks, vidéo ${video.src} !`,
            text: 'Va checker cette vidéo elle est super bien !',
            url: link
        })
    }
</script>
{% endblock %}